@using X.PagedList
@using X.PagedList.Mvc.Core
@using X.PagedList.Web.Common

@model List<Banding.Core.Models.ViewModels.FacturaViewModel>

<div class="container-xxl hero-header" style="padding-bottom:0px">
    <div class="container">

        <div class="contenedor-grande" style="margin:20px 400px;">
            <div class="row">
                <div class="col-1"></div>
                <div class="col-10">
                    <div>
                        <div class="row">
                            <form asp-action="Index" method="get">
                                <h5>Fecha Inicio</h5>
                                <input type="date" name="fechaInicio" class="form-control mar2" />
                                <br />
                                <h5>Fecha Fin</h5>
                                <input type="date" name="fechaFin" class="form-control mar2" />

                                <br />
                                <input type="submit" value="Consultar" class="btn btn-dark" />
                            </form>
                        </div>
                    </div>

                </div>
                <div class="col-1"></div>
            </div>

            <br />
        </div>>

        <br />

        @if (@Model.Count() != 0)
        {
            <div class="contenedor-grande">

                @*<form asp-action="Index" method="get">
                    <input hidden type="date" value="@ViewData["fechaInicio"]" name="fechaInicio" class="form-control mar2" />
                    <input hidden type="date" value="@ViewData["fechaFin"]" name="fechaFin" class="form-control mar2" />

                    <input type="search" value="Buscar por nombre" class="form-control" name="search" />
                    <input type="submit" value="Consultar" class="btn btn-dark" />
                    </form>
                *@
                <h3 style="text-align:center">Mostrando resultados desde @ViewData["fechaInicio"] hasta @ViewData["fechaFin"] </h3>

                <table class="table">
                    <thead>
                        <tr>
                            <th>
                                Producto
                            </th>
                            <th>
                                Cantidad Vendida
                            </th>
                            <th>
                                Fecha de Venta
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var factura in Model)
                        {
                            @foreach (var detalle in factura.DetalleFactura)
                            {
                                <tr>
                                    <td>
                                        @detalle.NombreProducto
                                    </td>
                                    <td>
                                        @detalle.CantidadVendida
                                    </td>
                                    <td>
                                        @factura.CabeceraFactura.FechaCabecera.ToShortDateString()
                                    </td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
            </div>
        }
    </div>
</div>

<partial name="~/Views/Shared/_NavbarStylePartial.cshtml" />
